# AIマインクラフターボット プロジェクトメモ

## プロジェクト概要
- マインクラフトプラグイン（Paper 1.21）
- AIボットが自動で採掘などのタスクを実行
- データパック側で動作実装済み

## データパック側の既存機能

### ボット召喚
- 見た目召喚: `/function imuzen127x74:summanekin`
- 足召喚: `/function imuzen127x74:sumpig`

### ボットの動作（3種類）

#### 1. 木を掘る
- コマンド: `/function imuzen127x74:xoak {x:-13,y:-55,z:47}`
- 実行方法: 常時実行（repeating）

#### 2. 石を掘る
- コマンド: `/function imuzen127x74:xstone {x:-3,y:-60,z:46}`
- 実行方法: 常時実行（repeating）

#### 3. 特定の座標へ向かう
- コマンド: `/function imuzen127x74:xaim {x:-3,y:-60,z:48}`
- 実行方法: **一度だけ実行**（常時実行不要）

### 重要な特性
- **実行時間**: これらの動作は瞬時ではなく、それなりの時間をかけて実行される
- **ボットのデータ取得**: `/data get entity @e[tag=test1,limit=1] data` (より厳密に取得可能)
  - インベントリも `data.Inventory` で取得可能
- **再召喚時の注意**: ボットを再召喚するとインベントリのアイテムがすべて消失する

## AIサーバー連携システム

### システムの全体像
ボットがAIサーバーと連携して自律的に行動を決定するシステム

### 「脳ファイル」の仕組み
1. **脳ファイル（テキストファイル）を生成・更新**
   - ボットごとに専用の脳ファイルを持つ
   - 定期的に情報を更新

2. **脳ファイルに記録する情報**
   - **視覚情報**: ボットの周囲のブロックの様子
   - **現在のタスク**: 実行中のタスク情報
   - **聴覚情報**: マイクラゲーム内のチャット内容

3. **脳ファイルのフォーマット（要決定）**
   ```
   例案:

   === ボットの脳 ===
   [視覚情報]
   前方: STONE, OAK_LOG, DIRT
   左: GRASS_BLOCK
   右: WATER
   上: AIR
   下: STONE
   ...

   [現在のタスク]
   なし
   または
   木を掘る (座標: -13, -55, 47)

   [聴覚情報（チャット履歴）]
   [10:30] Player1: こんにちは
   [10:31] Player2: 木を取ってきて
   ```

4. **視覚情報の取得範囲（要決定）**
   - [ ] ボットから何ブロック先まで見る？
     - 例: 前後左右上下 各5ブロック
     - 例: 前方のみ10ブロック
   - [ ] どのような形式でブロック情報を記録？
     - 例: 方向別リスト
     - 例: 座標とブロック種類のマップ
     - 例: 3D配列形式

5. **処理フロー**
   ```
   脳ファイル生成 → AIサーバーに送信 → AI判断 → タスク決定 → コマンド実行
   ```

6. **AIサーバーの役割**
   - 脳ファイルの内容を解析
   - 次に実行すべきタスクを決定
   - タスク指示を返す

7. **プラグインの役割**
   - 脳ファイルの生成・更新
   - AIサーバーへのリクエスト送信
   - AIの指示を解析してコマンド実行

### AIサーバー仕様（要確認）

#### 接続情報
- [ ] サーバーURL/エンドポイント（ローカル？リモート？）
- [ ] ポート番号
- [ ] 認証方法（APIキー等）

#### 通信仕様
- [ ] **送信形式**: 脳ファイルをどの形式で送信？
  - オプション1: テキストファイルの内容をそのまま送信
  - オプション2: JSON形式で構造化して送信
  - オプション3: その他

- [ ] **レスポンス形式**: AIサーバーからの応答はどんな形式？
  - 例1 (JSON): `{"task": "mine_wood", "x": -13, "y": -55, "z": 47}`
  - 例2 (テキスト): `MINE_WOOD -13 -55 47`
  - 例3 (自然言語): `木を掘ってください`

- [ ] タイムアウト設定（秒）
- [ ] エラー時の挙動（リトライ？待機？）

## プラグイン側で実装すること

### 必要な機能
1. **脳ファイル管理システム**
   - 脳ファイルの生成・読み書き
   - 視覚情報収集（周囲のブロック取得）
   - チャットイベントリスナー（聴覚情報）
   - タスク状態の記録

2. **AIサーバー通信モジュール**
   - HTTP通信（非同期処理）
   - 脳ファイルの送信
   - レスポンスの受信・パース

3. **タスク実行システム**
   - データパックのfunctionコマンド実行
   - BukkitSchedulerでの常時実行管理
   - タスクの開始/停止制御

4. **コマンドシステム**
   - 手動操作用コマンド
   - デバッグ・テスト用コマンド

## GitHub管理の開始（2025-11-11）

### 環境情報
- **プロジェクト名**: AIminer
- **プロジェクトパス**: `C:\Users\imuze\IdeaProjects\AIminer`
- **データパックパス**: `C:\Users\imuze\AppData\Roaming\.minecraft\saves\コピー用ワールド 62\datapacks\manekinwalk_datapack`
- **Git**: インストール済み（2.48.1.windows.1）
- **GitHub CLI**: インストール中（gh_2.83.0）

### セットアップ手順（進行中）
- [x] プロジェクトの現状確認
- [x] Gitのインストール確認
- [x] GitHub CLIのインストール完了（gh version 2.83.0 / 2025-11-11）
- [x] GitHub CLIでログイン完了（2025-11-11）
  - 認証コード: 7D7C-BB73 で認証完了
- [ ] GitHubリポジトリの作成
- [ ] AIminerプロジェクトをGit管理下に配置
- [ ] 初回コミット＆プッシュ

### 今後の管理方針
- プラグインのソースコード: GitHubで管理
- プロジェクトメモ（このファイル）: リポジトリに含める
- データパック: 現時点では別管理（今後検討）

---

## 次のステップ
1. GitHubセットアップの完了
2. AIサーバーの詳細仕様を確認
3. 脳ファイルのフォーマットを決定
4. 視覚情報の取得範囲を決定
5. プラグインのクラス設計
6. 実装開始
